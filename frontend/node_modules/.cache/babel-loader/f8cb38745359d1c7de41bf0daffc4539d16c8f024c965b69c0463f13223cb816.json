{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.determineApolloConfig = void 0;\nconst createSHA_1 = __importDefault(require(\"./utils/createSHA\"));\nfunction determineApolloConfig(input, logger) {\n  var _a, _b, _c;\n  const apolloConfig = {};\n  const {\n    APOLLO_KEY,\n    APOLLO_GRAPH_REF,\n    APOLLO_GRAPH_ID,\n    APOLLO_GRAPH_VARIANT\n  } = process.env;\n  if (input === null || input === void 0 ? void 0 : input.key) {\n    apolloConfig.key = input.key.trim();\n  } else if (APOLLO_KEY) {\n    apolloConfig.key = APOLLO_KEY.trim();\n  }\n  if (((_a = input === null || input === void 0 ? void 0 : input.key) !== null && _a !== void 0 ? _a : APOLLO_KEY) !== apolloConfig.key) {\n    logger.warn('The provided API key has unexpected leading or trailing whitespace. ' + 'Apollo Server will trim the key value before use.');\n  }\n  if (apolloConfig.key) {\n    assertValidHeaderValue(apolloConfig.key);\n  }\n  if (apolloConfig.key) {\n    apolloConfig.keyHash = (0, createSHA_1.default)('sha512').update(apolloConfig.key).digest('hex');\n  }\n  if (input === null || input === void 0 ? void 0 : input.graphRef) {\n    apolloConfig.graphRef = input.graphRef;\n  } else if (APOLLO_GRAPH_REF) {\n    apolloConfig.graphRef = APOLLO_GRAPH_REF;\n  }\n  const graphId = (_b = input === null || input === void 0 ? void 0 : input.graphId) !== null && _b !== void 0 ? _b : APOLLO_GRAPH_ID;\n  const graphVariant = (_c = input === null || input === void 0 ? void 0 : input.graphVariant) !== null && _c !== void 0 ? _c : APOLLO_GRAPH_VARIANT;\n  if (apolloConfig.graphRef) {\n    if (graphId) {\n      throw new Error('Cannot specify both graph ref and graph ID. Please use ' + '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph ID.');\n    }\n    if (graphVariant) {\n      throw new Error('Cannot specify both graph ref and graph variant. Please use ' + '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph variant.');\n    }\n  } else if (graphId) {\n    apolloConfig.graphRef = graphVariant ? `${graphId}@${graphVariant}` : graphId;\n  }\n  return apolloConfig;\n}\nexports.determineApolloConfig = determineApolloConfig;\nfunction assertValidHeaderValue(value) {\n  const invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/g;\n  if (invalidHeaderCharRegex.test(value)) {\n    const invalidChars = value.match(invalidHeaderCharRegex);\n    throw new Error(`The API key provided to Apollo Server contains characters which are invalid as HTTP header values. The following characters found in the key are invalid: ${invalidChars.join(', ')}. Valid header values may only contain ASCII visible characters. If you think there is an issue with your key, please contact Apollo support.`);\n  }\n}","map":{"version":3,"names":["createSHA_1","__importDefault","require","determineApolloConfig","input","logger","apolloConfig","APOLLO_KEY","APOLLO_GRAPH_REF","APOLLO_GRAPH_ID","APOLLO_GRAPH_VARIANT","process","env","key","trim","_a","warn","assertValidHeaderValue","keyHash","default","update","digest","graphRef","graphId","_b","graphVariant","_c","Error","exports","value","invalidHeaderCharRegex","test","invalidChars","match","join"],"sources":["C:\\Users\\Hamza Arrouida\\Desktop\\PROJECTS\\SNRT\\audio-managment-v2 [enhanced]\\node_modules\\apollo-server-core\\src\\determineApolloConfig.ts"],"sourcesContent":["import type {\n  ApolloConfig,\n  ApolloConfigInput,\n  Logger,\n} from 'apollo-server-types';\nimport createSHA from './utils/createSHA';\n\n// This function combines the `apollo` constructor argument and some environment\n// variables to come up with a full ApolloConfig.\nexport function determineApolloConfig(\n  input: ApolloConfigInput | undefined,\n  logger: Logger,\n): ApolloConfig {\n  const apolloConfig: ApolloConfig = {};\n\n  const {\n    APOLLO_KEY,\n    APOLLO_GRAPH_REF,\n    APOLLO_GRAPH_ID,\n    APOLLO_GRAPH_VARIANT,\n  } = process.env;\n\n  // Determine key.\n  if (input?.key) {\n    apolloConfig.key = input.key.trim();\n  } else if (APOLLO_KEY) {\n    apolloConfig.key = APOLLO_KEY.trim();\n  }\n  if ((input?.key ?? APOLLO_KEY) !== apolloConfig.key) {\n    logger.warn(\n      'The provided API key has unexpected leading or trailing whitespace. ' +\n        'Apollo Server will trim the key value before use.',\n    );\n  }\n\n  // Assert API key is a valid header value, since it's going to be used as one\n  // throughout.\n  if (apolloConfig.key) {\n    assertValidHeaderValue(apolloConfig.key);\n  }\n\n  // Determine key hash.\n  if (apolloConfig.key) {\n    apolloConfig.keyHash = createSHA('sha512')\n      .update(apolloConfig.key)\n      .digest('hex');\n  }\n\n  // Determine graph ref, if provided together.\n  if (input?.graphRef) {\n    apolloConfig.graphRef = input.graphRef;\n  } else if (APOLLO_GRAPH_REF) {\n    apolloConfig.graphRef = APOLLO_GRAPH_REF;\n  }\n\n  // See if graph ID and variant were provided separately.\n  const graphId = input?.graphId ?? APOLLO_GRAPH_ID;\n  const graphVariant = input?.graphVariant ?? APOLLO_GRAPH_VARIANT;\n\n  if (apolloConfig.graphRef) {\n    if (graphId) {\n      throw new Error(\n        'Cannot specify both graph ref and graph ID. Please use ' +\n          '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph ID.',\n      );\n    }\n    if (graphVariant) {\n      throw new Error(\n        'Cannot specify both graph ref and graph variant. Please use ' +\n          '`apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph variant.',\n      );\n    }\n  } else if (graphId) {\n    // Graph ref is not specified, but the ID is. We can construct the ref\n    // from the ID and variant. Note that after this, we stop tracking the ID\n    // and variant, because Apollo Server 3 does not assume that all graph refs\n    // can be decomposed into ID and variant (except in the op reg plugin).\n    apolloConfig.graphRef = graphVariant\n      ? `${graphId}@${graphVariant}`\n      : graphId;\n  }\n\n  return apolloConfig;\n}\n\nfunction assertValidHeaderValue(value: string) {\n  // Ref: node-fetch@2.x `Headers` validation\n  // https://github.com/node-fetch/node-fetch/blob/9b9d45881e5ca68757077726b3c0ecf8fdca1f29/src/headers.js#L18\n  const invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/g;\n  if (invalidHeaderCharRegex.test(value)) {\n    const invalidChars = value.match(invalidHeaderCharRegex)!;\n    throw new Error(\n      `The API key provided to Apollo Server contains characters which are invalid as HTTP header values. The following characters found in the key are invalid: ${invalidChars.join(\n        ', ',\n      )}. Valid header values may only contain ASCII visible characters. If you think there is an issue with your key, please contact Apollo support.`,\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;AAKA,MAAAA,WAAA,GAAAC,eAAA,CAAAC,OAAA;AAIA,SAAgBC,qBAAqBA,CACnCC,KAAoC,EACpCC,MAAc;;EAEd,MAAMC,YAAY,GAAiB,EAAE;EAErC,MAAM;IACJC,UAAU;IACVC,gBAAgB;IAChBC,eAAe;IACfC;EAAoB,CACrB,GAAGC,OAAO,CAACC,GAAG;EAGf,IAAIR,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAES,GAAG,EAAE;IACdP,YAAY,CAACO,GAAG,GAAGT,KAAK,CAACS,GAAG,CAACC,IAAI,EAAE;GACpC,MAAM,IAAIP,UAAU,EAAE;IACrBD,YAAY,CAACO,GAAG,GAAGN,UAAU,CAACO,IAAI,EAAE;;EAEtC,IAAI,CAAC,CAAAC,EAAA,GAAAX,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAES,GAAG,cAAAE,EAAA,cAAAA,EAAA,GAAIR,UAAU,MAAMD,YAAY,CAACO,GAAG,EAAE;IACnDR,MAAM,CAACW,IAAI,CACT,sEAAsE,GACpE,mDAAmD,CACtD;;EAKH,IAAIV,YAAY,CAACO,GAAG,EAAE;IACpBI,sBAAsB,CAACX,YAAY,CAACO,GAAG,CAAC;;EAI1C,IAAIP,YAAY,CAACO,GAAG,EAAE;IACpBP,YAAY,CAACY,OAAO,GAAG,IAAAlB,WAAA,CAAAmB,OAAS,EAAC,QAAQ,CAAC,CACvCC,MAAM,CAACd,YAAY,CAACO,GAAG,CAAC,CACxBQ,MAAM,CAAC,KAAK,CAAC;;EAIlB,IAAIjB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEkB,QAAQ,EAAE;IACnBhB,YAAY,CAACgB,QAAQ,GAAGlB,KAAK,CAACkB,QAAQ;GACvC,MAAM,IAAId,gBAAgB,EAAE;IAC3BF,YAAY,CAACgB,QAAQ,GAAGd,gBAAgB;;EAI1C,MAAMe,OAAO,GAAG,CAAAC,EAAA,GAAApB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEmB,OAAO,cAAAC,EAAA,cAAAA,EAAA,GAAIf,eAAe;EACjD,MAAMgB,YAAY,GAAG,CAAAC,EAAA,GAAAtB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEqB,YAAY,cAAAC,EAAA,cAAAA,EAAA,GAAIhB,oBAAoB;EAEhE,IAAIJ,YAAY,CAACgB,QAAQ,EAAE;IACzB,IAAIC,OAAO,EAAE;MACX,MAAM,IAAII,KAAK,CACb,yDAAyD,GACvD,4EAA4E,CAC/E;;IAEH,IAAIF,YAAY,EAAE;MAChB,MAAM,IAAIE,KAAK,CACb,8DAA8D,GAC5D,iFAAiF,CACpF;;GAEJ,MAAM,IAAIJ,OAAO,EAAE;IAKlBjB,YAAY,CAACgB,QAAQ,GAAGG,YAAY,GAChC,GAAGF,OAAO,IAAIE,YAAY,EAAE,GAC5BF,OAAO;;EAGb,OAAOjB,YAAY;AACrB;AA1EAsB,OAAA,CAAAzB,qBAAA,GAAAA,qBAAA;AA4EA,SAASc,sBAAsBA,CAACY,KAAa;EAG3C,MAAMC,sBAAsB,GAAG,0BAA0B;EACzD,IAAIA,sBAAsB,CAACC,IAAI,CAACF,KAAK,CAAC,EAAE;IACtC,MAAMG,YAAY,GAAGH,KAAK,CAACI,KAAK,CAACH,sBAAsB,CAAE;IACzD,MAAM,IAAIH,KAAK,CACb,6JAA6JK,YAAY,CAACE,IAAI,CAC5K,IAAI,CACL,+IAA+I,CACjJ;;AAEL","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}