{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ApolloServerPluginDrainHttpServer = void 0;\nconst stoppable_1 = require(\"./stoppable\");\nfunction ApolloServerPluginDrainHttpServer(options) {\n  const stopper = new stoppable_1.Stopper(options.httpServer);\n  return {\n    async serverWillStart() {\n      return {\n        async drainServer() {\n          var _a;\n          await stopper.stop((_a = options.stopGracePeriodMillis) !== null && _a !== void 0 ? _a : 10000);\n        }\n      };\n    }\n  };\n}\nexports.ApolloServerPluginDrainHttpServer = ApolloServerPluginDrainHttpServer;","map":{"version":3,"names":["stoppable_1","require","ApolloServerPluginDrainHttpServer","options","stopper","Stopper","httpServer","serverWillStart","drainServer","stop","_a","stopGracePeriodMillis","exports"],"sources":["C:\\Users\\Hamza Arrouida\\Desktop\\PROJECTS\\SNRT\\audio-managment-v2 [enhanced]\\node_modules\\apollo-server-core\\src\\plugin\\drainHttpServer\\index.ts"],"sourcesContent":["import type http from 'http';\nimport type { ApolloServerPlugin } from 'apollo-server-plugin-base';\nimport { Stopper } from './stoppable';\n\n/**\n * Options for ApolloServerPluginDrainHttpServer.\n */\nexport interface ApolloServerPluginDrainHttpServerOptions {\n  /**\n   * The http.Server (or https.Server, etc) to drain. Required.\n   */\n  httpServer: http.Server;\n  /**\n   * How long to wait before forcefully closing non-idle connections.\n   * Defaults to 10_000 (ten seconds).\n   */\n  stopGracePeriodMillis?: number;\n}\n\n/**\n * This plugin is used with apollo-server-express and other framework\n * integrations to drain your HTTP server on shutdown.\n * See https://www.apollographql.com/docs/apollo-server/api/plugin/drain-http-server/\n * for details.\n */\nexport function ApolloServerPluginDrainHttpServer(\n  options: ApolloServerPluginDrainHttpServerOptions,\n): ApolloServerPlugin {\n  const stopper = new Stopper(options.httpServer);\n  return {\n    async serverWillStart() {\n      return {\n        async drainServer() {\n          await stopper.stop(options.stopGracePeriodMillis ?? 10_000);\n        },\n      };\n    },\n  };\n}\n"],"mappings":";;;;;;AAEA,MAAAA,WAAA,GAAAC,OAAA;AAuBA,SAAgBC,iCAAiCA,CAC/CC,OAAiD;EAEjD,MAAMC,OAAO,GAAG,IAAIJ,WAAA,CAAAK,OAAO,CAACF,OAAO,CAACG,UAAU,CAAC;EAC/C,OAAO;IACL,MAAMC,eAAeA,CAAA;MACnB,OAAO;QACL,MAAMC,WAAWA,CAAA;;UACf,MAAMJ,OAAO,CAACK,IAAI,CAAC,CAAAC,EAAA,GAAAP,OAAO,CAACQ,qBAAqB,cAAAD,EAAA,cAAAA,EAAA,GAAI,KAAM,CAAC;QAC7D;OACD;IACH;GACD;AACH;AAbAE,OAAA,CAAAV,iCAAA,GAAAA,iCAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}